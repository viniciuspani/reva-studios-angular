/* =========================================================
   user-dashboard.component.scss
   Versão final ajustada para: hover/selected, CRUD icons,
   sem overflow horizontal e aparência do card de Pastas
   ========================================================= */

/* === Base layout === */
.user-dashboard {
  min-height: 100vh;
  background-color: hsl(0, 0%, 98%);
}

.dashboard-container {
  padding: 8rem 1rem 5rem;
  max-width: 90rem;
  margin: 0 auto;
}

.dashboard-header {
  margin-bottom: 2rem;

  h1 {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    color: hsl(270, 15%, 10%);
    line-height: 1.2;
  }

  p {
    color: hsl(270, 15%, 40%);
    font-size: 0.9375rem;
    margin: 0;
  }
}

/* === Stats grid (mantido) === */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
  /* ... (seu código existente para cards) ... */
}

/* === Main grid / folders card === */
.main-grid {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 1.5rem;
}

/* Pastas card visual (bordas, header) */
.folders-card {
  height: fit-content;
  border-radius: 0.75rem;

  ::ng-deep .p-card {
    border-radius: 0.75rem;
    box-shadow: 0 1px 6px rgba(0,0,0,0.06);
    border: 1px solid rgba(124, 58, 237, 0.06);
  }

  .folders-header {
    padding: 1rem 1.25rem;
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-bottom: 1px solid rgba(0,0,0,0.04);

    h3 {
      font-size: 1rem;
      font-weight: 600;
      color: hsl(270, 15%, 10%);
      margin: 0;
    }
  }
}

/* === Tree & node custom template === */

/* ensure p-tree receives our class in the HTML: styleClass="folders-tree" */
.p-tree.folders-tree {
  /* PrimeNG variables for hover/selected/icon colors */
  --p-tree-node-hover-background: #d946ef;
  --p-tree-node-hover-color: #ffffff;
  --p-tree-node-selected-background: #d946ef;
  --p-tree-node-selected-color: #ffffff;
  --p-tree-node-icon-color: #ffffff;
  --p-tree-node-icon-hover-color: #ffffff;
  --p-tree-node-icon-selected-color: #ffffff;

  /* remove tree default border/padding if any */
  border: none;
  padding: 0.5rem;
  background: transparent;
}

/* Prevent any internal element from producing horizontal overflow */
.folders-card ::ng-deep .p-tree,
.folders-card ::ng-deep .p-tree-container,
.folders-card ::ng-deep .p-tree-root,
.folders-card ::ng-deep .p-tree-node,
.folders-card ::ng-deep .p-tree-node-content {
  max-width: 100%;
  overflow-x: hidden;
}

/* Node content: make a single non-wrapping flex row so icons don't wrap */
.p-tree.folders-tree .p-tree-node-content {
  display: flex !important;
  align-items: center !important;
  gap: .5rem !important;
  flex-wrap: nowrap !important;
  min-width: 0 !important;
  padding: 0.6rem 0.5rem !important;
  border-radius: 0.5rem;
}

/* PrimeNG toggle and icon should not shrink */
.p-tree.folders-tree .p-tree-node-toggle-button,
.p-tree.folders-tree .p-tree-node-icon {
  flex-shrink: 0 !important;
}

/* Custom wrapper that contains label + actions */
.custom-tree-node {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  gap: .5rem !important;
  width: 100%;
  min-width: 0;
  overflow: hidden;
}

/* Label: allow shrinking and ellipsis */
.custom-tree-node .folder-label {
  flex: 1 1 auto !important;
  min-width: 0 !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
  color: inherit; /* inherits color from node content (for selected/hover) */
}

/* Actions container: hidden by default, shown on hover or when selected */
/* Keep it non-shrinking so the buttons remain visible and inside row */
.folder-actions {
  display: flex;
  gap: .4rem;
  flex-shrink: 0;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity .12s ease;
  align-items: center;
}

/* Buttons: prevent shrinking and keep consistent size */
.folder-action-btn {
  width: 1.75rem !important;
  height: 1.75rem !important;
  min-width: 1.75rem !important;
  padding: 0 !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  flex-shrink: 0 !important;
}

.folder-delete-btn {
  &:hover {
    background-color: rgba(239, 68, 68, 0.12) !important;
  }
}

/* Show actions when hovering the row */
.p-tree.folders-tree .p-tree-node-content:hover .folder-actions {
  opacity: 1 !important;
  pointer-events: auto !important;
}

/* Show actions when row is selected (PrimeNG adds p-tree-node-selected) */
.p-tree.folders-tree .p-tree-node-content.p-tree-node-selected .folder-actions {
  opacity: 1 !important;
  pointer-events: auto !important;
}

/* Hover & selected visual (background + text & icon color) */
.p-tree.folders-tree .p-tree-node-content:hover,
.p-tree.folders-tree .p-tree-node-content.p-tree-node-selected {
  background: #d946ef !important;
  color: #ffffff !important;
  box-shadow: 0 2px 6px rgba(217, 70, 239, 0.12);
}

/* Force icons to white on hover/selected */
.p-tree.folders-tree .p-tree-node-content:hover .p-tree-node-icon,
.p-tree.folders-tree .p-tree-node-content.p-tree-node-selected .p-tree-node-icon,
.p-tree.folders-tree .p-tree-node-content:hover .p-tree-node-toggle-icon,
.p-tree.folders-tree .p-tree-node-content.p-tree-node-selected .p-tree-node-toggle-icon {
  color: #ffffff !important;
  fill: #ffffff !important;
}

/* Ensure labels inside selected/hover change color to white */
.p-tree.folders-tree .p-tree-node-content:hover .folder-label,
.p-tree.folders-tree .p-tree-node-content.p-tree-node-selected .folder-label {
  color: #ffffff !important;
}

/* Prevent nested tree nodes from increasing width unexpectedly */
.p-tree.folders-tree .p-tree-node-children {
  padding-left: 1.25rem; /* indentation for children */
  max-width: 100%;
  overflow-x: hidden;
}

/* Small responsive tweaks */
@media (max-width: 768px) {
  .main-grid { grid-template-columns: 1fr; }
  .folders-card { max-height: 300px; overflow-y: auto; }
}

/* === End of SCSS === */
